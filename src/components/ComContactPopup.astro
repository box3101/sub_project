<div class="com-popup-wrap">
	<div class="com-popup">
		<div class="popup-header flex aic jcb">
			<h2>If you have any questions for our team, we're here for you.</h2>
			<span class="close">
				<a href="#">
					<img
						src="../img/close-pop.svg"
						alt=""
						style="width: 15px;    position: relative;
          top: 2px;"
					/>
				</a>
			</span>
		</div>
		<div class="popup-info">
			<form action="#" method="post" id="contactForm">
				<div class="form-group">
					<label for="company">Company <span>*</span></label>
					<input
						type="text"
						id="company"
						name="company"
						placeholder="Nice to meet you!"
						required
					/>
				</div>
				<div class="form-group">
					<label for="name">Name <span>*</span></label>
					<input type="text" id="name" name="name" placeholder="" required />
				</div>
				<div class="form-group">
					<label for="phone">Phone <span>*</span></label>
					<input type="tel" id="phone" name="phone" placeholder="" required />
				</div>
				<div class="form-group">
					<label for="email">E-mail <span>*</span></label>
					<input
						type="email"
						id="email"
						name="email"
						placeholder="We don't spam!"
						required
					/>
				</div>
				<div class="form-group">
					<label for="message">Leave Your Message <span>*</span></label>
					<textarea
						id="message"
						name="message"
						placeholder="How can we help?"
						required></textarea>
				</div>
				<button type="submit" class="submit-button" alert="Thank you!"
					>Submit</button
				>
			</form>
		</div>
	</div>
	<div class="bg"></div>
</div>

<script>
	(function () {
		// EmailJS 초기화
		emailjs.init("gmuoPzoC69dYngEW1"); // 여기에 실제 사용자 ID를 입력하세요

		document
			.querySelector("#contactForm")
			?.addEventListener("submit", function (e) {
				e.preventDefault();

				// 폼 데이터를 객체로 가져옵니다.
				let data = {
					company: document.querySelector("#company").value,
					name: document.querySelector("#name").value,
					phone: document.querySelector("#phone").value,
					email: document.querySelector("#email").value,
					message: document.querySelector("#message").value,
				};

				// EmailJS를 이용해 이메일 보내기
				emailjs.send("service_xyy2kh6", "ex1", data).then(
					function (response) {
						console.log("Success", response.status, response.text);
						alert("Your email request has been sent!")
						// 성공 메시지 표시, 폼 리셋 등 추가 작업 수행
					},
					function (error) {
						console.error("Failed", error);
						// 오류 메시지 표시 등 추가 작업 수행
					}
				);
			});

		// 기존 팝업 닫기 로직 (변경 없음)
		setTimeout(function () {
			const $close = document.querySelector(".com-popup-wrap .close");
			const $body = document.querySelector("body");

			$close.addEventListener("click", function (e) {
				e.preventDefault();
				this.closest(".com-popup-wrap").classList.remove("on");
				$body.classList.remove("on");
			});
		}, 10);
	})();
</script>
